[
  {
    "objectID": "quarto/index.html",
    "href": "quarto/index.html",
    "title": "my-site",
    "section": "",
    "text": "This is a Quarto website.\nTo learn more about Quarto websites visit https://quarto.org/docs/websites.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "code/notebooks/er_aggregation.html",
    "href": "code/notebooks/er_aggregation.html",
    "title": "FOR SP6 (PREACT-digital): Emotion regulation ema data aggregation",
    "section": "",
    "text": "Date: 2025-07-15\nThis notebook aggregates the 8 emotion regulation items for the Baseline EMA data of PREACT-digital.\nAggregation level: Person-specific (intraindividual) mean and standard deviation values for each item over the entire baseline period (14 days).\n8 Items: * er_intensity * er_control * er_relaxation * er_rumination * er_reappraisal * er_distraction * er_suppression * er_acceptance\n\nImport data\nPreprocessing: rename variables, filter for baseline data and transform\nAggregation: one row per subject (for_id) and one column per item: intraindividual mean (im) and standard deviation (isd) for each item\nExport data: as .csv file\n\n\n# import packages\nimport os\nfrom pyprojroot import here # define relative paths to the project root (working directory)\nimport sys \nimport pickle\nimport pandas as pd\nimport numpy as np\n\n# relative project root\nroot = here() # '.here' is located as invisible file in the project root working directory\n\n# add 'src/' to the relative path\nsrc_path = here()/ \"src\" \nsys.path.append(str(src_path))\n\n# import relative paths\nfrom server_config import preprocessed_path\n\n\n1. Import Data\n\nwith open(preprocessed_path + '/ema_content.pkl', 'rb') as file:\n    df_ema = pickle.load(file)\n    \n\n\n\n2. Preprocess Data\n\n# preview data frame\ndf_ema.head()\n\n\n\n\n\n\n\n\ncustomer\nquestionnaire\nstudy\nquestion\nelement\nquest_create\norder\nquestionnaireSession\nchoice_id\nchoice_text\n...\nema_relative_start_phase0\nema_relative_start_phase1\nema_relative_start_phase2\nema_relative_end_phase0\nema_relative_end_phase1\nema_relative_end_phase2\nema_relative_start\nabsolute_day_index\nrelative_day_index\nquestionnaire_counter\n\n\n\n\n0\n4MLe\n105\n24\n315\n1709.0\n2023-05-17 18:24:55.163\n0.0\n7611\n3\n3\n...\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n2023-05-17\n1\n1\n1\n\n\n1\n4MLe\n105\n24\n316\n1717.0\n2023-05-17 18:24:58.692\n0.0\n7611\n4\n4\n...\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n2023-05-17\n1\n1\n1\n\n\n2\n4MLe\n105\n24\n317\n1725.0\n2023-05-17 18:25:02.916\n0.0\n7611\n5\n5\n...\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n2023-05-17\n1\n1\n1\n\n\n3\n4MLe\n105\n24\n318\n1730.0\n2023-05-17 18:25:06.688\n0.0\n7611\n3\n3\n...\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n2023-05-17\n1\n1\n1\n\n\n4\n4MLe\n105\n24\n319\n1736.0\n2023-05-17 18:25:13.488\n0.0\n7611\n2\n2\n...\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n2023-05-17\n1\n1\n1\n\n\n\n\n5 rows × 44 columns\n\n\n\n\ndf_ema.columns\n\nIndex(['customer', 'questionnaire', 'study', 'question', 'element',\n       'quest_create', 'order', 'questionnaireSession', 'choice_id',\n       'choice_text', 'quest_title', 'questionnaire_name', 'quest_create_day',\n       'for_id', 'ema_id', 'study_version', 'status', 't20_post',\n       'ema_base_start', 'ema_base_end', 'ema_t20_start', 'ema_t20_end',\n       'ema_post_start', 'ema_post_end', 'weekday', 'createdAt_day', 'season',\n       'time_of_day', 'assess', 'weekend', 'quest_nr', 'n_quest',\n       'quest_nr_str', 'unique_day_id', 'ema_relative_start_phase0',\n       'ema_relative_start_phase1', 'ema_relative_start_phase2',\n       'ema_relative_end_phase0', 'ema_relative_end_phase1',\n       'ema_relative_end_phase2', 'ema_relative_start', 'absolute_day_index',\n       'relative_day_index', 'questionnaire_counter'],\n      dtype='object')\n\n\n\n#'quest_complete' in df_ema.columns\n\n\n# Step 1: Rename relevant columns (in line with quarto documentation) using a mapping dictionary \n\nrename_map = {\n    'customer': 'id',\n    'choice_id': 'response',\n    'quest_title': 'item',\n    'quest_create': 'timestamp_item_completion',\n    'quest_expir': 'timestamp_beep_expiration',\n    'quest_create_day': 'date',\n    'ema_base_start': 'ema_burst_start',\n    'ema_base_end': 'ema_burst_end',\n    'assess': 'measurement_burst',\n    'unique_day_id': 'beep_per_person_id',\n    'quest_nr': 'nr_beep_daily',\n    'n_quest': 'n_beeps_completed',\n}\n\ndf_ema.rename(columns=rename_map, inplace=True)\n\n\n# Step 2: keep only relevant columns\ndf_ema = df_ema[['id', 'for_id', 'timestamp_item_completion', \n                 'measurement_burst', 'response', 'item', \n                 'beep_per_person_id', 'date', 'nr_beep_daily', 'n_beeps_completed', \n                 'ema_burst_start', 'ema_burst_end', 'ema_relative_start_phase0',\n                 'ema_relative_start_phase1', 'ema_relative_start_phase2',\n                 'ema_relative_end_phase0', 'ema_relative_end_phase1', 'ema_relative_end_phase2',\n                 'absolute_day_index', 'relative_day_index']]\n\n\n\ndf_ema.head()\n\n\n\n\n\n\n\n\nid\nfor_id\ntimestamp_item_completion\nmeasurement_burst\nresponse\nitem\nbeep_per_person_id\ndate\nnr_beep_daily\nn_beeps_completed\nema_burst_start\nema_burst_end\nema_relative_start_phase0\nema_relative_start_phase1\nema_relative_start_phase2\nema_relative_end_phase0\nema_relative_end_phase1\nema_relative_end_phase2\nabsolute_day_index\nrelative_day_index\n\n\n\n\n0\n4MLe\nFOR11905\n2023-05-17 18:24:55.163\n0\n3\npanas_selfassurance\n20230517_8.0\n2023-05-17\n8.0\n1\n2023-05-17\n2023-05-31\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n1\n1\n\n\n1\n4MLe\nFOR11905\n2023-05-17 18:24:58.692\n0\n4\npanas_joviality2\n20230517_8.0\n2023-05-17\n8.0\n1\n2023-05-17\n2023-05-31\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n1\n1\n\n\n2\n4MLe\nFOR11905\n2023-05-17 18:25:02.916\n0\n5\npanas_fatigue\n20230517_8.0\n2023-05-17\n8.0\n1\n2023-05-17\n2023-05-31\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n1\n1\n\n\n3\n4MLe\nFOR11905\n2023-05-17 18:25:06.688\n0\n3\npanas_joviality1\n20230517_8.0\n2023-05-17\n8.0\n1\n2023-05-17\n2023-05-31\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n1\n1\n\n\n4\n4MLe\nFOR11905\n2023-05-17 18:25:13.488\n0\n2\npanas_fear1\n20230517_8.0\n2023-05-17\n8.0\n1\n2023-05-17\n2023-05-31\n2023-05-17\n2023-10-27\n2024-08-15\n2023-06-01\n2023-11-11\n2024-08-30\n1\n1\n\n\n\n\n\n\n\n\n# print all unique 'item' values in df_ema that contain 'er_':\nitems_with_er = df_ema['item'][df_ema['item'].str.contains('er_', na=False)].unique()\nprint(items_with_er)\n\n['er_intensity' 'er_control' 'er_distraction' 'er_reappraisal'\n 'er_rumination' 'er_relaxation' 'er_suppression' 'er_acceptance']\n\n\n\ndf_ema['measurement_burst'].unique().tolist()\n\n[0, 1, 2]\n\n\n\n# filter for baseline data\ndf_ema_burst0 = df_ema[df_ema['measurement_burst'] == 0].copy()\n\n# check how many unique FOR IDs\ndf_ema_burst0['for_id'].nunique()\n\n397\n\n\n\n#print(sorted(df_ema_burst0['for_id'].unique()))\n\n\nSanity check:\n\n\nN = 397 FOR IDs (last data export: 20250708)\n\n\nN = 393 IDs (last data export: 20250708)\nSTILL TO DO\n\n# add column 'number of beeps completed'\n\n# add column '% (compliance)'\n\n#df_ema_burst0['unqiue_d'].unique().tolist()\n\n\n\n\n3. Aggregation\n[aggregation level: one row per subject with one Mean + SD per Item]\n\n# check data type\ndf_ema_burst0['item'] = df_ema_burst0['item'].astype('string')\n\ndf_ema_burst0['item'].dtype # object type, i.e. string \n\nstring[python]\n\n\n\n# filter only the rows where the 'item' column starts with 'er_'\ndf_er_items = df_ema_burst0[df_ema_burst0['item'].str.startswith('er_')]\n\n# save only the emotion regulation items \nprint(df_er_items['item'].unique())\n\n&lt;StringArray&gt;\n[  'er_intensity',     'er_control', 'er_distraction', 'er_reappraisal',\n  'er_rumination',  'er_relaxation', 'er_suppression',  'er_acceptance']\nLength: 8, dtype: string\n\n\n\n# Group by subject and item, then aggregate\nagg_df = df_er_items.groupby(['for_id', 'item'])['response'].agg(['mean', 'std']).reset_index()\n\nagg_df.head()\n\n\n\n\n\n\n\n\nfor_id\nitem\nmean\nstd\n\n\n\n\n0\nFOR11001\ner_acceptance\n5.000000\n1.195229\n\n\n1\nFOR11001\ner_control\n3.206522\n1.895849\n\n\n2\nFOR11001\ner_distraction\n4.891304\n1.296288\n\n\n3\nFOR11001\ner_intensity\n4.086957\n1.426994\n\n\n4\nFOR11001\ner_reappraisal\n2.978261\n1.300704\n\n\n\n\n\n\n\n\n# step 1: convert to wide format: one row per subject, item values = columns\nagg_wide = agg_df.pivot(index='for_id', columns='item') \n\n# step 2: Flatten multi-index columns (because step 1 creates multi-level columns)\nagg_wide.columns = [f\"{stat}_{item}\" for stat, item in agg_wide.columns]\n\n# step 3: reset index \nagg_wide.reset_index(inplace=True)\n\n# visual inspection\nagg_wide.head()\n\n\n\n\n\n\n\n\nfor_id\nmean_er_acceptance\nmean_er_control\nmean_er_distraction\nmean_er_intensity\nmean_er_reappraisal\nmean_er_relaxation\nmean_er_rumination\nmean_er_suppression\nstd_er_acceptance\nstd_er_control\nstd_er_distraction\nstd_er_intensity\nstd_er_reappraisal\nstd_er_relaxation\nstd_er_rumination\nstd_er_suppression\n\n\n\n\n0\nFOR11001\n5.000000\n3.206522\n4.891304\n4.086957\n2.978261\n3.695652\n5.304348\n4.836957\n1.195229\n1.895849\n1.296288\n1.426994\n1.300704\n1.364697\n1.427663\n1.521113\n\n\n1\nFOR11003\n1.000000\n1.947368\n1.157895\n1.894737\n1.000000\n1.000000\n1.105263\n1.000000\n0.000000\n1.311220\n0.688247\n1.286457\n0.000000\n0.000000\n0.458831\n0.000000\n\n\n2\nFOR11005\n1.000000\n1.947368\n1.157895\n1.894737\n1.000000\n1.000000\n1.105263\n1.000000\n0.000000\n1.311220\n0.688247\n1.286457\n0.000000\n0.000000\n0.458831\n0.000000\n\n\n3\nFOR11010\n5.125000\n3.208333\n3.791667\n4.875000\n1.791667\n2.875000\n3.875000\n4.500000\n1.261900\n1.587428\n1.744037\n0.946963\n1.350657\n1.776966\n1.623536\n1.668115\n\n\n4\nFOR11011\n3.866667\n3.200000\n3.866667\n4.266667\n3.333333\n1.000000\n4.066667\n3.800000\n1.641718\n1.082326\n1.125463\n1.222799\n1.290994\n0.000000\n1.334523\n1.473577\n\n\n\n\n\n\n\n\n# sanity check: sample size\nagg_wide['for_id'].nunique()\n\n397\n\n\n\n# sanity check: data type\nagg_wide['mean_er_control'].dtype\n\ndtype('float64')\n\n\n\n# rename variables\n\nrename_er_map = {\n    'mean_er_acceptance': 'accept_im',\n    'std_er_acceptance': 'accept_isd',\n    'mean_er_control': 'contr_im',\n    'std_er_control': 'contr_isd',\n    'mean_er_distraction': 'distr_im',\n    'std_er_distraction': 'distr_isd',\n    'mean_er_intensity': 'intens_im',\n    'std_er_intensity': 'intens_isd',\n    'mean_er_reappraisal': 'reappr_im',\n    'std_er_reappraisal': 'reappr_isd',\n    'mean_er_relaxation': 'relax_im',\n    'std_er_relaxation': 'relax_isd',\n    'mean_er_rumination': 'rumin_im',\n    'std_er_rumination': 'rumin_isd',\n    'mean_er_suppression': 'suppr_im',\n    'std_er_suppression': 'suppr_isd',\n}\n\nagg_wide.rename(columns=rename_er_map, inplace=True)\n\nagg_wide.head(10)\n\n\n\n\n\n\n\n\nfor_id\naccept_im\ncontr_im\ndistr_im\nintens_im\nreappr_im\nrelax_im\nrumin_im\nsuppr_im\naccept_isd\ncontr_isd\ndistr_isd\nintens_isd\nreappr_isd\nrelax_isd\nrumin_isd\nsuppr_isd\n\n\n\n\n0\nFOR11001\n5.000000\n3.206522\n4.891304\n4.086957\n2.978261\n3.695652\n5.304348\n4.836957\n1.195229\n1.895849\n1.296288\n1.426994\n1.300704\n1.364697\n1.427663\n1.521113\n\n\n1\nFOR11003\n1.000000\n1.947368\n1.157895\n1.894737\n1.000000\n1.000000\n1.105263\n1.000000\n0.000000\n1.311220\n0.688247\n1.286457\n0.000000\n0.000000\n0.458831\n0.000000\n\n\n2\nFOR11005\n1.000000\n1.947368\n1.157895\n1.894737\n1.000000\n1.000000\n1.105263\n1.000000\n0.000000\n1.311220\n0.688247\n1.286457\n0.000000\n0.000000\n0.458831\n0.000000\n\n\n3\nFOR11010\n5.125000\n3.208333\n3.791667\n4.875000\n1.791667\n2.875000\n3.875000\n4.500000\n1.261900\n1.587428\n1.744037\n0.946963\n1.350657\n1.776966\n1.623536\n1.668115\n\n\n4\nFOR11011\n3.866667\n3.200000\n3.866667\n4.266667\n3.333333\n1.000000\n4.066667\n3.800000\n1.641718\n1.082326\n1.125463\n1.222799\n1.290994\n0.000000\n1.334523\n1.473577\n\n\n5\nFOR11012\n4.176471\n4.352941\n4.705882\n5.000000\n3.823529\n3.117647\n4.647059\n3.882353\n1.776066\n1.538716\n1.829095\n1.658312\n1.074436\n1.900077\n2.089892\n2.117851\n\n\n6\nFOR11015\n4.741935\n3.838710\n4.354839\n5.419355\n4.838710\n3.903226\n5.032258\n4.967742\n1.237410\n1.416493\n1.450250\n1.088552\n1.485413\n1.350428\n1.425573\n1.816294\n\n\n7\nFOR11016\n2.194444\n3.805556\n4.750000\n4.638889\n5.972222\n1.861111\n5.361111\n4.888889\n1.848852\n1.600347\n2.418677\n1.376388\n1.443925\n1.290687\n1.457057\n1.996823\n\n\n8\nFOR11018\n4.032967\n3.626374\n3.912088\n3.824176\n4.076923\n3.769231\n3.824176\n4.175824\n1.905842\n1.953051\n1.930160\n1.975367\n1.962033\n1.966819\n1.969734\n2.030837\n\n\n9\nFOR11019\n4.009615\n5.298077\n3.750000\n2.644231\n2.865385\n3.769231\n2.298077\n2.625000\n2.383174\n2.052135\n2.428592\n1.879466\n2.234147\n2.277926\n1.800107\n2.290493\n\n\n\n\n\n\n\n\n# sanity check: any NaNs? TRUE\nagg_wide.isna().any().any()\n\n# sanity check: how many NaN per column?\nagg_wide.isna().sum()\n\nfor_id        0\naccept_im     1\ncontr_im      1\ndistr_im      1\nintens_im     0\nreappr_im     1\nrelax_im      1\nrumin_im      1\nsuppr_im      1\naccept_isd    4\ncontr_isd     4\ndistr_isd     4\nintens_isd    4\nreappr_isd    4\nrelax_isd     4\nrumin_isd     4\nsuppr_isd     4\ndtype: int64\n\n\n\n\n4. Export data\n\nimport os\nos.makedirs(preprocessed_path, exist_ok=True)\n\n\n# export as .csv file\nagg_wide.to_csv(os.path.join(preprocessed_path, 'er_ema.csv'), index=False)\n\n\n# Full path to the CSV file\n#csv_file = os.path.join(preprocessed_path, 'er_ema.csv')\n\n#df = pd.read_csv(csv_file)\n#df.head(10)\n\n\n\n\n\n\n\n\nfor_id\naccept_im\ncontr_im\ndistr_im\nintens_im\nreappr_im\nrelax_im\nrumin_im\nsuppr_im\naccept_isd\ncontr_isd\ndistr_isd\nintens_isd\nreappr_isd\nrelax_isd\nrumin_isd\nsuppr_isd\n\n\n\n\n0\nFOR11001\n5.000000\n3.206522\n4.891304\n4.086957\n2.978261\n3.695652\n5.304348\n4.836957\n1.195229\n1.895849\n1.296288\n1.426994\n1.300704\n1.364697\n1.427663\n1.521113\n\n\n1\nFOR11003\n1.000000\n1.947368\n1.157895\n1.894737\n1.000000\n1.000000\n1.105263\n1.000000\n0.000000\n1.311220\n0.688247\n1.286457\n0.000000\n0.000000\n0.458831\n0.000000\n\n\n2\nFOR11005\n1.000000\n1.947368\n1.157895\n1.894737\n1.000000\n1.000000\n1.105263\n1.000000\n0.000000\n1.311220\n0.688247\n1.286457\n0.000000\n0.000000\n0.458831\n0.000000\n\n\n3\nFOR11010\n5.125000\n3.208333\n3.791667\n4.875000\n1.791667\n2.875000\n3.875000\n4.500000\n1.261900\n1.587428\n1.744037\n0.946963\n1.350657\n1.776966\n1.623536\n1.668115\n\n\n4\nFOR11011\n3.866667\n3.200000\n3.866667\n4.266667\n3.333333\n1.000000\n4.066667\n3.800000\n1.641718\n1.082326\n1.125463\n1.222799\n1.290994\n0.000000\n1.334523\n1.473577\n\n\n5\nFOR11012\n4.176471\n4.352941\n4.705882\n5.000000\n3.823529\n3.117647\n4.647059\n3.882353\n1.776066\n1.538716\n1.829095\n1.658312\n1.074436\n1.900077\n2.089892\n2.117851\n\n\n6\nFOR11015\n4.741935\n3.838710\n4.354839\n5.419355\n4.838710\n3.903226\n5.032258\n4.967742\n1.237410\n1.416493\n1.450250\n1.088552\n1.485413\n1.350428\n1.425573\n1.816294\n\n\n7\nFOR11016\n2.194444\n3.805556\n4.750000\n4.638889\n5.972222\n1.861111\n5.361111\n4.888889\n1.848852\n1.600347\n2.418677\n1.376388\n1.443925\n1.290687\n1.457057\n1.996823\n\n\n8\nFOR11018\n4.032967\n3.626374\n3.912088\n3.824176\n4.076923\n3.769231\n3.824176\n4.175824\n1.905842\n1.953051\n1.930160\n1.975367\n1.962033\n1.966819\n1.969734\n2.030837\n\n\n9\nFOR11019\n4.009615\n5.298077\n3.750000\n2.644231\n2.865385\n3.769231\n2.298077\n2.625000\n2.383174\n2.052135\n2.428592\n1.879466\n2.234147\n2.277926\n1.800107\n2.290493\n\n\n\n\n\n\n\n\n# create a mapping directory for affect\n#affect_map = {\n#    'panas_attentiveness': 'attentive',\n#    'panas_joviality1': 'cheerful',\n#    'panas_joviality2': 'happy',\n#    'panas_selfassurance': 'self-confident',\n#   'panas_serenity1': 'relaxed',\n#    'panas_serenity2': 'calm',\n#    'panas_fatigue': 'fatigue',\n#    'panas_fear1': 'anxious',\n#    'panas_fear2': 'nervous',\n#    'panas_guilt1': 'ashamed',\n#    'panas_guilt2': 'dissatisfied_myself',\n#    'panas_hostility1': 'irritable',\n#    'panas_hostility2': 'angry',\n#    'panas_loneliness': 'lonely',\n#    'panas_sadness1': 'downcast',\n#    'panas_sadness2': 'sad',\n#    'panas_shyness': 'shy'    \n#}\n\n# rename affect items\n#df_ema.loc[:, 'item']  = df_ema['item'].replace(affect_map)"
  },
  {
    "objectID": "quarto/about.html",
    "href": "quarto/about.html",
    "title": "About",
    "section": "",
    "text": "About this site",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "quarto/documentation.html",
    "href": "quarto/documentation.html",
    "title": "PREACT-digital: Feature Database Documentation",
    "section": "",
    "text": "Welcome to the documentation for the PREACT-digital study (study protocol).",
    "crumbs": [
      "Feature Database Documentation"
    ]
  },
  {
    "objectID": "quarto/documentation.html#introduction",
    "href": "quarto/documentation.html#introduction",
    "title": "PREACT-digital: Feature Database Documentation",
    "section": "",
    "text": "Welcome to the documentation for the PREACT-digital study (study protocol).",
    "crumbs": [
      "Feature Database Documentation"
    ]
  },
  {
    "objectID": "quarto/documentation.html#design",
    "href": "quarto/documentation.html#design",
    "title": "PREACT-digital: Feature Database Documentation",
    "section": "Design",
    "text": "Design\n\nLongitudinal study design (PREACT-digital)\n\n\n\nCaption describing the figure\n\n\n\n\n\n\n\n\n\nGlossary\n\n\n\n\n\n\nbeep =\nmeasurement burst =\n…",
    "crumbs": [
      "Feature Database Documentation"
    ]
  },
  {
    "objectID": "quarto/documentation.html#data-structure",
    "href": "quarto/documentation.html#data-structure",
    "title": "PREACT-digital: Feature Database Documentation",
    "section": "Data Structure",
    "text": "Data Structure\nFolder Structure on High Performance Cluster (HPC) [wip]\n\nSP6/\n    |- processed/\n        |- passive/\n            |- epoch                        # not aggregated; most finegrained resolution\n                |- activity_epoch\n                |- heart_rate_epoch\n                |- ecg_epoch\n                |- gps_epoch\n            |- daily                        # daily aggregates\n                |- activity_daily\n                |- heart_rate_daily\n                |- ecg_daily\n                |- gps_daily\n        |- ema\n                |- ema_beep                 # not aggregated; most finegrained resolution   \n                |- ema_daily                # daily aggregate\n                |- ema_burst                # burst aggregate\n                |- ema_meta                 # technical meta data\n        |- ecg\n                |- ecg_raw                  # raw data (sampling rate: 300 Hz; 9000 data points/30sec)\n                |- ecg_processed            # processed, e.g. heart rate variability (hrv) \n        |- meta\n                |- monitoring               # study monitoring",
    "crumbs": [
      "Feature Database Documentation"
    ]
  },
  {
    "objectID": "quarto/documentation.html#ema-data",
    "href": "quarto/documentation.html#ema-data",
    "title": "PREACT-digital: Feature Database Documentation",
    "section": "EMA Data",
    "text": "EMA Data\nThis section outlines the EMA data sets (files) in detail and provides a thorough description of the eight EMA constructs and a item-level overview.\n\nData sets\n\nFiles:\n\nema_beep.pkl\nema_meta.pkl\n\nDetails ema_content.pkl file:\n\n\nShow details\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo.\nColumn name\nDescription\nData type\nScale level\nVariable Level\n\n\n\n\n1\nid\nUnique identifier wearable and ema data within subproject 6 (SP6)\nstr\n\n\n\n\n2\nfor_id\nUnique identifier across all PREACT subprojects and redcap\nstr\n\n\n\n\n3\ntimestamp_item_completion\nTimestamp at which a single item was completed\ndatetime64\ninterval\n\n\n\n4\ntimestamp_beep_completion\nTimestamp at which a beep was completed\ndatetime64\ninterval\n\n\n\n5\ntimestamp_beep_expiration\nTimestamp at which the processing of the beep has expired (a beep expires after 30 min)\ndatetime64\ninterval\n\n\n\n6\nmeasurment_burst\nMeasurement burst describes the measurement point in the longitudinal study [Baseline (T0), after 20 therapy sessions (T20), or after therapy end respectively 365 days after therapy start (TPost)]\nint\nordinal\n0 = T0  1 = T20  2 = TPost\n\n\n7\nschedule_chronotype\nDepending on their individual sleep-wake rhythm participants can choose to receive beeps between 07:30 and 21:30 (lark) or 09:30 and 22:30 (owl)\nint\nnominal\n24 = T0 lark  25 = T0 owl  33 = T20 lark  34 = T20 owl  38 = TPost lark  39 = TPost owl\n\n\n8\nresponse\nChosen response by participant\nint\nordinal, nominal, binary\n\n\n\n9\nitem\nQuestion/item title\nstr\n\n\n\n\n10\nbeep_per_person_id\nUnique beep identifier. Date and number of beep per ID\nstr\n\n\n\n\n11\ndate\nDate on which the question/item was generated\ndatetime64\ninterval\n\n\n\n12\nstudy_version\nStudy version (short version: includes Baseline (T0), long version: includes Baseline (T0), T20 and TPost)\nint\nnominal\n1= long  2 = short\n\n\n13\nema_burst_start\nAbsolute start EMA measurement burst (i.e. defined start according to study protocol)\ndatetime64\ninterval\n\n\n\n14\nema_burst_end\nAbsolute end EMA measurement burst (i.e. defined end according to study protocol)\ndatetime64\ninterval\n\n\n\n15\nseason\nDescribes the four seasons\nint\nnominal\n1 = Spring  2 = Summer  3 = Fall  4 = Winter\n\n\n16\ntime_of_day\nTime of day stratified into five categories (Early Morning = 00:00 - 00:00, Morning = 00:00 - 00:00, Afternoon = 00:00 - 00:00, Evening = 00:00 - 00:00, Night = 00:00 - 00:00)\nint\nnominal\n1 = Early Morning  2 = Morning  3 = Afternoon  4 = Evening  5 = Night\n\n\n17\nweekend\nDoes the timestamp in the time series describes a day at the weekend?\nint\nnominal\n0 = No  1 = Yes\n\n\n18\nnr_beep_daily\nNumber of questionnaire/beep within a day\nint\nordinal\n1 - 8\n\n\n19\nn_beeps_completed\nNumber of questionnaires/beeps completed by a person within a day\nint\nordinal\n1 - 9\n\n\n20\nema_relat_burst_start\nRelative start EMA measurement burst (i.e. actual start)\ndatetime64\ninterval\n\n\n\n21\nema_relat_burst_end\nRelative end EMA measurement burst (i.e. actual end)\ndatetime64\ninterval\n\n\n\n22\nabsolute_day_index\nDay since expected (absolute) start\nint\nratio\n1 - 16\n\n\n23\nrelative_day_index\nDay since actual (relative) start\nint\nratio\n1 - 16\n\n\n\n\n\n\nDetails ema_meta.pkl file:\n\n\nShow details\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo.\nColumn name\nDescription\nData type\nScale level\nVariable Level\n\n\n\n\n1\nid\nUnique identifier wearable and ema data within subproject 6 (SP6)\nstr\n\n\n\n\n2\nfor_id\nUnique identifier across all PREACT subprojects and redcap\nstr\n\n\n\n\n3\nresponse_text\nResponse displayed on device\nstr\n\n\n\n\n4\nitem_code_map\nNumerical item code mapping\nint\n[insert]\nnominal\n\n\n5\nbeep_type\n\nint\n\nnominal\n\n\n6\nbeep_type_name\nName of the questionnaire\nstr\n\n\n\n\n7\nitem_order\nOrder in which the items are displayed\nint\n0 - 8\n\n\n\n8\nbeep_num_run\nHow many times a beep was opend before completion. Unique per answer. One beep can have multiple runs until completion\nint\n\n\n\n\n\n\n\n\n\n\n\nMethods: Hierarchical Data Structure\n\nLevel 1: Measurements (Observations)\n\nEach person records data 8x/day over 14 days\nThis results in 112 measurements per wave (8x14)\n\nLevel 2: Days\n\nMeasurements (Level 1) are nested within days (Level 2)\nEach wave has 14 days\n\nLevel 3: Waves (Measurement points)\n\nEach person goes thorugh three waves (long version)\nDays (Level 2) are nested within waves (Level 3)\n\nLevel 4: Individuals (Participants)\n\nWaves (Level 3) are nested within participants (Level 4)\n\n\n\n\n\nEMA constructs and item-level overview\nThe EMA measurement includes the following constructs:\n\nAffect\nEmotion regulation\nSituational context\nSignificant events\nSocial context\nTherapeutic agency\nPhysical fitness\nECG control\n\n\nAffect\n\nDescription: At each beep, participants were asked about their current affective state\nConstruct: PANAS-X subscales Haney et al. (2023)\n17 Items\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\n\nHow … do you feel right now?\n\n\n\n\n\nanxious\nanxious\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nnervous\nnervous\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nattentive\nattentive\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nrelaxed\nrelaxed\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ncalm\ncalm\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nirritable\nirritable\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nangry\nangry\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nfatigue\nfatigue\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ncheerful\ncheerful\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nhappy\nhappy\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nashamed\nashamed\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ndissatisfied_myself\ndissatisfied with myself\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nself_confident\nself-confident\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nshy\nshy\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ndowncast\ndowncast\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nsad\nsad\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\nlonely\nlonely\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\n\n\n\n\n\n\nEmotion regulation\n\nDescription: At each beep, participants were asked to rate the intensity and controllability of their most negative thought since the last beep. Then, we assessed the use of different ER strategies since the last beep\nConstruct: RESS-EMA scale Medland et al. (2020)\n6 Items (covering reappraisal, rumination, suppression, distraction, relaxation, acceptance)\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\n\nThink about the strongest negative feeling since the last beep [since waking up].\n\n\n\n\n\ner_intensity\nHow intense was this feeling?\n1-2-3-4-5-6-7 (1 = neutral)\nnot at all - very much\nall beeps (except the first of the day)\n\n\ner_intensity_morning\nHow intense was this feeling?\n1-2-3-4-5-6-7 (1 = neutral)\nnot at all - very much\nfirst beep of the day\n\n\ner_control\nHow controllable was the situation that triggered this feeling?\n1-2-3-4-5-6-7 (4 = neutral)\nnot at all - very much\nall beeps (except the first of the day)\n\n\ner_control_morning\nHow controllable was the situation that triggered this feeling?\n1-2-3-4-5-6-7 (4 = neutral)\nnot at all - very much\nfirst beep of the day\n\n\n\nAs a reaction to the negative feeling …\n\n\n\n\n\ner_relaxation\nI tried to breathe deeply\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ner_rumination\nI kept thinking about what was bothering me\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ner_reappraisal\nI considered the situation from different perspectives\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ner_distraction\nI tried to distract myself\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ner_suppression\nI tried to hide my feelings\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\ner_acceptance\nI tried to accept the situation\n1-2-3-4-5-6-7\nnot at all - very much\nall beeps\n\n\n\n\n\n\n\n\nSituational Context\n\nDescription: At each beep, participants were asked to specify activities they had pursued in the preceding 2 hours from a given set of 9 common activities. Participants were able to select multiple options simultaneously. Subsequently, they were asked to evaluate how much they enjoyed the respective activities\nConstruct: Self-constructed, based on the DIAMONDS scale Rauthmann & Sherman (2016) and the WARN-D study protocol Fried et al. (2022), a similar longitudinal digital phenotyping study. We aimed to find a balance between sparsity of items and high degree of situational coverage.\n2 Items\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\n\nHow did you spent the time since the last beep [since waking up]?  (Multiple answers possible)\n\n\n\n\n\nsituation_1\n[ ] Work or study  [ ] Housework or errands  [ ] Caring for children/relatives  [ ] Eating/drinking/personal hygiene  [ ] On the move (e.g., in the subway)  [ ] Smartphone/social media  [ ] Leisure activity, rather passive (e.g., watching a movie, reading)  [ ] Leisure activity, rather active (e.g., sports, outings)  [ ] Something else\n\n\nall beeps (except the first of the day)\n\n\nsituation_1_morning\ncf. above\n\n\nfirst beep of the day\n\n\nsituation_2\nHow much did you enjoy this activity?\n-2, -1, 0, 1, 2\nnot at all - very much\nall beeps (except the first of the day)\n\n\nsituation_2_morning\ncf. above\n-2, -1, 0, 1, 2\nnot at all - very much\nfirst beep of the day\n\n\n\n\n\n\n\n\nSignificant Events\n\nDescription: Participants were asked to think about the most important event since the last beep and how pleasant they perceived it\nConstruct: Self-constructed\n1 Items\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\nevent_general\nThink of the most significant moment (situation/experience) since the last survey. How did you perceive it?\n-2, -1, 0, 1, 2\nvery unpleasant - very pleasant\nall beeps (except the first of the day)\n\n\nevent_general_morning\nThink of the most significant moment (situation/experience) since waking up. How did you perceive it?\n-2, -1, 0, 1, 2\nvery unpleasant - very pleasant\nfirst beep of the day\n\n\n\n\n\n\n\n\nSocial context\n\nDescription: Participants were asked if they had social contacts since the last beep, how (online/ in person/ phone) and how agreeable the contact was.\nSelf-constructed\n3 Items\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\nevent_social_1\nHave you had social contacts since the last survey?\nbinary:  yes/no\n\nall beeps (except the first of the day)\n\n\nevent_social_1_morning\nHave you had social contacts since waking up?\nbinary:  yes/no\n\nfirst beep of the day\n\n\nevent_social_2\nHow did the social contact take place?\nmultiple choice:  [ ] online  [ ] by phone  [ ] in person\n\nall beeps\n\n\nevent_social_3\nHow did you experience the social contacts?\n-2, -1, 0, 1, 2\nvery unpleasant - very pleasant\nall beeps\n\n\n\n\n\n\n\n\nTherapeutic Agency (TA)\n\nDescription: Participants were asked about Therapeutic Agency (TA) in everyday life\nConstruct: Self-constructed based on the Therapeutic Agency Inventory (TAI) Huber et al. (2019). The original TAI contains 3 subscales, covering in-session activities, passivity towards the therapist and out-of-session activities. As we were interested in assessing therapeutic agency in everyday life, our TAI-EMA items are based on the “out-of-session activities” subscales and cover cognitive and behavioral aspects of TA\n4 Items\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\n\nPrompted by my therapy today, I have … / Today I have …\n\n\n\n\n\nta_behavioral_1\n… implemented ideas or tasks from therapy\n1-2-3-4-5-6-7\nnot at all - very much\n1x/day, 8th beep\n\n\nta_behavioral_2\n… tried to think differently about things\n1-2-3-4-5-6-7\nnot at all - very much\n1x/day, 8th beep\n\n\nta_cognitive_1\n… thought about something that was discussed in therapy\n1-2-3-4-5-6-7\nnot at all - very much\n1x/day, 8th beep\n\n\nta_cognitive_2\n… done something to improve my situation\n1-2-3-4-5-6-7\nnot at all - very much\n1x/day, 8th beep\n\n\n\n\n\n\n\n\nPhysical Fitness\n\nDescription: Participants were asked how physically healthy they had felt today on the last beep of the day\nConstruct: Self-constructed\n1 Item\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\nphysical_health\nHow physically healthy did you feel today?\n-2, -1, 0, 1, 2\nworse than usual / normal / better than usual\n1x/day, 8th beep\n\n\n\n\n\n\n\n\nECG Control\n\nDescription: During measurement bursts, patients were asked twice per day to conduct a resting-state ECG on their Scanwatch. To control for potential confounders influencing the signal, we asked if they had consumed nicotine, caffeine or alcohol or had a heavy meal in the last 30 minutes\nConstruct: Self-constructed\n1 Item\n\n\n\nShow Items\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nItem\nScale\nScale Endpoints\nMeasurement Time\n\n\n\n\necg_control\nWithin the last 30 minutes, did you …  - drink coffee or alcohol?  - smoke?  - eat a heavy meal?\nbinary:  yes/no\n\n2x/day, 1th and 5th beep",
    "crumbs": [
      "Feature Database Documentation"
    ]
  },
  {
    "objectID": "quarto/documentation.html#passive-sensor-data",
    "href": "quarto/documentation.html#passive-sensor-data",
    "title": "PREACT-digital: Feature Database Documentation",
    "section": "Passive Sensor Data",
    "text": "Passive Sensor Data\nThis section outlines the passive sensor data set (files) in detail and provides a thorough description of the different wearable modalities (heartrate, acivity, sleep, GPS).\n\nData sets\n\nFiles:\n\npassive_data.feather\n\nDetails passive_data.feather file:\n\n\nShow details\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo.\nColumn name\nDescription\nData type\nScale level\nVariable Level\n\n\n\n\n1\nid\nUnique identifier wearable and ema data within subproject 6 (SP6)\nstr\n\n\n\n\n2\nfor_id\nUnique identifier across all PREACT subprojects and redcap\nstr\n\n\n\n\n3\nmodality\nType of modality\nstr\ncategorical\n\n\n\n4\ntimestamp_start\nTimestamp at which the specific modality recording starts\ndatetime64\ninterval\n\n\n\n5\ntimestamp_end\nTimestamp at which the specific modality recording ends\ndatetime64\ninterval\n\n\n\n6\ntime_interval\nDuration recording\nstr\n\n\n\n\n7\nfloat value\nVariable level of the modality\nfloat\n\n\n\n\n8\nboolean_value\nVariable level of the modality\nboolean\n\n\n\n\n9\nstart_date\nStart date of recording\ndatetime64\n\n\n\n\n10\nstart_hour\nStart hour of recording\ndatetime64\n\n\n\n\n11\nstudy_version\nStudy version (short version: includes Baseline (T0), long version: includes Baseline (T0), T20 and TPost)\nint\nnominal\n1= long  2 = short\n\n\n\n\n\n\n\n\nHeartrate\n\n\nShow details\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo.\nModality\nDevice\nData type\nSampling Rate\nScale level\nFeatures\n\n\n\n\n1\nheartrate_PPG\nWithings Scanwatch\n\n\n\n\n\n\n2\nrmssd\nWithings Scanwatch\n\n\n\n\n\n\n\n\n\n\n\n\nActivity\n\n\nShow details\n\n\n\n\n\nNo.\nModality\nDevice\nData type\nScale level\nFeatures\n\n\n\n\n1\nSteps\nWithings Scanwatch\n\n\n\n\n\n2\nActivityType\nWithings Scanwatch\n\n\n\n\n\n3\nActivityBinary\nWithings Scanwatch\n\n\n\n\n\n4\nRunBinary\nWithings Scanwatch\n\n\n\n\n\n5\nBikeBinary\nWithings Scanwatch\n\n\n\n\n\n6\nWalkBinary\nWithings Scanwatch\n\n\n\n\n\n7\nFloorsClimed\nWithings Scanwatch\n\n\n\n\n\n8\nElevationGain\nWithings Scanwatch\n\n\n\n\n\n9\nElevationGain\nWithings Scanwatch\n\n\n\n\n\n10\nActiveBurnedCalories\nWithings Scanwatch\n\n\n\n\n\n11\nActiveTypeDetail1\nWithings Scanwatch\n\n\n\n\n\n12\nActiveTypeDetail2\nWithings Scanwatch\n\n\n\n\n\n\n\n\n\nSteps: Daily Aggregates\nDaily Features inspired by [insert RADAR study reference]\nFile name: steps_daily\n\n\nShow details\n\n\n\n\n\n\n\n\n\n\nNo.\nColumn Name\nDescription\n\n\n\n\n1\nid\nUnique identifier wearable and ema data within subproject 6 (SP6)\n\n\n2\nfor_id\nUnique identifier across all PREACT subprojects and redcap\n\n\n3\ndate\nDay timestamp (floor to day) UTC\n\n\n4\nn_steps_day\nTotal number of walked steps within the day\n\n\n5\nspm_25_steps\n25th percentile of daily steps per minute distribution\n\n\n6\nspm_50_steps\n50th percentile of daily steps per minute distribution\n\n\n7\nspm_75_steps\n75th percentile of daily steps per minute distribution\n\n\n8\nspm_max_steps\nMaximum steps per minute along all day\n\n\n9\nspm_count_steps\nNumber of minutes with step data available\n\n\n10\nspm_mean_steps\nMean steps per minute along all day (among available records)\n\n\n11\nspm_std_steps\nStandard deviation of steps per minute along all day\n\n\n12\nspm_skew_steps\nSkewness of steps per minute along all day\n\n\n13\nspm_kurtosis_steps\nKurtosis of steps per minute along all day\n\n\n14\nnight_sum_steps\nSum of steps per minute during nighttime (00:00-05:59)\n\n\n15\nnight_mean_steps\nMean steps per minute during nighttime (00:00-05:59)\n\n\n16\nn_hour_steps\nMean of hourly step sums (sum of steps per minute, averaged by hour)\n\n\n17\nspm_max_avghr_steps\nMaximum steps per minute, averaged by hour\n\n\n18\nspm_mean_avghr_steps\nMean steps per minute, averaged by hour\n\n\n19\nspm_std_avghr_steps\nStandard deviation of steps per minute, averaged by hour\n\n\n20\nspm_skew_avghr_steps\nSkewness of steps per minute, averaged by hour\n\n\n21\nspm_kurtosis_avghr_steps\nKurtosis of steps per minute, averaged by hour\n\n\n22\nn_steps_activehr_steps\nMaximum of the hourly sum of steps along all day\n\n\n23\ntimestamp_max_activehr_steps\nMost active hour (hour with maximum hourly sum of steps)\n\n\n24\nmax_spm_activehr_steps\nMaximum step cadence during the most active hour\n\n\n25\nmean_spm_activehr_steps\nAverage step cadence during the most active hour\n\n\n26\ndailysteps_25perc_steps\nHour at which 25th percentile of daily steps occurred (cumulative)\n\n\n27\ndailysteps_50perc_steps\nHour at which 50th percentile of daily steps occurred (cumulative)\n\n\n28\ndailysteps_75perc_steps\nHour at which 75th percentile of daily steps occurred\n\n\n\n\n\n\n\n\nSleep\n\n\nGPS",
    "crumbs": [
      "Feature Database Documentation"
    ]
  },
  {
    "objectID": "quarto/documentation.html#ecg-data",
    "href": "quarto/documentation.html#ecg-data",
    "title": "PREACT-digital: Feature Database Documentation",
    "section": "ECG Data",
    "text": "ECG Data\n\nData sets",
    "crumbs": [
      "Feature Database Documentation"
    ]
  }
]